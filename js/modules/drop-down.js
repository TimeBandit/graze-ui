define(['exports','../utils/agent-detection','../utils/viewport-detection','../utils/respond'],function(a,b,c,d){'use strict';function e(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(a,'__esModule',{value:!0}),a.default=function(a){var b=(0,f.default)(a),c=(0,g.default)(a);return function(d){function e(){o?-1<a.inArray(c.getViewportSize(),o)?(p.resetAllBindings(),p.initOffScreen()):(p.resetAllBindings(),p.initDropDown()):p.initDropDown()}function f(){a('html').on('click touchstart',p.resetActiveStates),m.on('click touchstart',g),m.on('mouseenter',p.resetActiveStates)}function g(b){p.hasDropdownMenu(a(this).parent())&&'visible'!==a(this).siblings('.nav__dropdown__menu').css('visibility').toLowerCase()&&(p.resetActiveStates(),p.show(a(this).parent()),b.preventDefault(),b.stopPropagation())}function i(){m.on('click',j),a('.nav__dropdown__menu__sub__header').off('click').on('click',k)}function j(b){p.hasDropdownMenu(a(this).parent())&&(a('html').off(),p.toggle(a(this).parent()),b.preventDefault(),b.stopPropagation())}function k(){var b=a(this).siblings().find('.nav__dropdown__menu__sub__content');b.length&&(a(this).hasClass('nav__dropdown__menu__sub__header--active')?(b.removeClass('nav__dropdown__menu__sub__content--active'),a(this).removeClass('nav__dropdown__menu__sub__header--active')):(b.addClass('nav__dropdown__menu__sub__content--active'),a(this).addClass('nav__dropdown__menu__sub__header--active')))}var l=d.block('nav').data('p.block'),m=l.element('dropdown__item').block('nav__dropdown'),n=l.getAttr('data-dropdown-offscreen'),o=n?n.split(','):null,p={init:function(){e()},initDropDown:function(){f()},initOffScreen:function(){i()},hasDropdownMenu:function(b){return a(b).find('.nav__dropdown__menu').length},show:function(a){a.addClass('nav__dropdown--active'),a.find('.nav__dropdown__item').attr('aria-expanded','true')},hide:function(a){a.removeClass('nav__dropdown--active'),a.find('.nav__dropdown__item').attr('aria-expanded','false')},toggle:function(a){a.hasClass('nav__dropdown--active')?p.hide(a):p.show(a)},resetAllBindings:function(){a('html').off('click touchstart',p.resetActiveStates),m.off('click',g),m.off('mouseenter',p.resetActiveStates),m.off('click',j),p.resetActiveStates()},resetActiveStates:function(){a('html').find('.nav__dropdown__item').each(function(){p.hasDropdownMenu(a(this).parent())&&(a(this).parent().find('.nav__item, .nav__dropdown__item').attr('aria-expanded','false').blur(),a(this).parent().removeClass('nav__dropdown--active'))})}};if(o){var q=(0,h.default)(a,c,b);q.respondOnBreakpoints(p.init,o)}return p.init(),p}};var f=e(b),g=e(c),h=e(d)});